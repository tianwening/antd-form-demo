{"version":3,"file":"static/js/566.829aa9ee.chunk.js","mappings":"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","sources":["examples/nested-form-list.jsx","../node_modules/ahooks/es/useUpdate/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Form, Input, Button, Row, Col, Space } from 'antd'\nimport { useUpdate } from 'ahooks'\nimport { useEffect } from 'react';\n\nconst OUTER_FORM_LIST_NAME = 'outer'\nconst INNER_FORM_LIST_NAME = 'inner'\n\n// 大概长这个结构\n// {\n//   outer: [\n//     {\n//       name: '',\n//       inner: [\n//         {\n//           password: '',\n//           confirmPassword: ''\n//         }\n//       ]\n//     }\n//   ]\n// }\n\nconst NestedFormList = () => {\n  const update = useUpdate()\n  const [data, setData] = useState([])\n  const [form] = Form.useForm()\n\n  useEffect(() => {\n    form.setFieldsValue({\n      [OUTER_FORM_LIST_NAME]: [\n        {\n          name: '',\n          [INNER_FORM_LIST_NAME]: [\n            {\n              password: '',\n              confirmPassword: ''\n            }\n          ]\n        }\n      ]\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const onFinish = (params) => {\n    setData(params)\n  }\n\n  return (\n    <Form\n      form={form}\n      labelCol={{ span: 8 }}\n      wrapperCol={{ span: 8 }}\n      onFinish={onFinish}\n    >\n      <Row>\n        <Col offset={8} span={8}>\n          {data && JSON.stringify(data, null, 4)}\n        </Col>\n      </Row>\n      <Form.List\n        name={OUTER_FORM_LIST_NAME}\n      >\n        {\n          (outerFields, { add: addOuter }) => {\n            return outerFields.map((outerField, { add }) => {\n              return (\n                <Space\n                  key={outerField.name}\n                  style={{\n                    width: '100%'\n                  }}\n                  direction=\"vertical\"\n                >\n                  <Form.Item\n                    label=\"外层的名字\"\n                    name={[outerField.name, 'name']}\n                  >\n                    <Input />\n                  </Form.Item>\n                  <Form.List\n                    name={[outerField.name, INNER_FORM_LIST_NAME]}\n                  >\n                    {\n                      (fields, { add }) => {\n                        return fields.map(field => (\n                          <Space\n                            style={{\n                              width: '100%'\n                            }}\n                            key={field.key}\n                            direction=\"vertical\"\n                          >\n                            <div >\n                              <Form.Item\n                                label=\"密码\"\n                                name={[field.name, 'password']}\n                              >\n                                <Input />\n                              </Form.Item>\n                              <Form.Item\n                                label=\"确认密码\"\n                                name={[field.name, 'confirmPassword']}\n                                dependencies={[[OUTER_FORM_LIST_NAME, outerField.name, INNER_FORM_LIST_NAME, field.name, 'password']]}\n                                rules={[\n                                  {\n                                    validator: ((pIndex, index) => (rule, value) => {\n                                      const namePath = [OUTER_FORM_LIST_NAME, pIndex, INNER_FORM_LIST_NAME, index, 'password']\n                                      const password = form.getFieldValue(namePath)\n                                      console.log(password, value)\n                                      if (password !== value) {\n                                        return Promise.reject(new Error(\"密码和确认密码不一致，请检查\"))\n                                      }\n                                      return Promise.resolve()\n                                    })(outerField.name, field.name)\n                                  }\n                                ]}\n                              >\n                                <Input />\n                              </Form.Item>\n                            </div>\n                            <Button type=\"dashed\" onClick={() => {\n                              add({\n                                password: '',\n                                confirmPassword: ''\n                              })\n                            }}>里层的新增</Button>\n                          </Space>\n                        ))\n                      }\n                    }\n                  </Form.List>\n                  <Button type=\"primary\" onClick={() => {\n                    addOuter({\n                      name: '',\n                      [INNER_FORM_LIST_NAME]: [\n                        {\n                          password: '',\n                          confirmPassword: ''\n                        }\n                      ]\n                    })\n                    // update()\n                  }}>外层的新增</Button>\n                </Space>\n              )\n            })\n          }\n        }\n      </Form.List>\n      <Form.Item\n        labelCol={{ span: 16 }}\n        wrapperCol={{ span: 8 }}\n      >\n        <Row>\n          <Col offset={4}>\n            <Button htmlType='submit'>提交</Button>\n          </Col>\n        </Row>\n      </Form.Item>\n    </Form>\n  )\n};\n\nexport default NestedFormList;\n","var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nimport { useCallback, useState } from 'react';\n\nvar useUpdate = function useUpdate() {\n  var _a = __read(useState({}), 2),\n      setState = _a[1];\n\n  return useCallback(function () {\n    return setState({});\n  }, []);\n};\n\nexport default useUpdate;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"names":["OUTER_FORM_LIST_NAME","INNER_FORM_LIST_NAME","useUpdate","useState","data","setData","Form","form","useEffect","setFieldsValue","name","password","confirmPassword","labelCol","span","wrapperCol","onFinish","params","offset","JSON","stringify","outerFields","addOuter","add","map","outerField","style","width","direction","label","fields","field","dependencies","rules","validator","pIndex","index","rule","value","namePath","getFieldValue","console","log","Promise","reject","Error","resolve","type","onClick","key","htmlType","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","error","setState","useCallback","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable"],"sourceRoot":""}